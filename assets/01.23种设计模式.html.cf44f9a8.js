import{_ as d}from"./plugin-vue_export-helper.21dcd24c.js";import{o as r,c as v,a as n,d as s,b as i,e as l,r as a}from"./app.96d9e652.js";const c={},t=n("h1",{id:"_23\u79CD\u8BBE\u8BA1\u6A21\u5F0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_23\u79CD\u8BBE\u8BA1\u6A21\u5F0F","aria-hidden":"true"},"#"),i(" 23\u79CD\u8BBE\u8BA1\u6A21\u5F0F")],-1),u=n("p",null,"\u524D\u7AEF\u70B9\u7EBF\u9762",-1),m=n("blockquote",null,[n("p",null,"\u4F7F\u7528\u601D\u7EF4\u5BFC\u56FE\u6765\u9610\u8FF023\u79CD\u8BBE\u8BA1\u6A21\u5F0F\uFF0C\u5E76\u4EE5TypeScript\u5B9E\u73B0\u5176\u4EE3\u7801\uFF0C\u8BA9\u6211\u4EEC\u524D\u7AEF\u5207\u56FE\u5D3D\u5199\u51FA\u7684\u4EE3\u7801\u5177\u6709\u53EF\u6269\u5C55\u6027\u3001\u53EF\u590D\u7528\u6027\u3001\u51CF\u5C11\u4EE3\u7801\u5197\u4F59\u95EE\u9898\uFF0C\u63D0\u5347\u81EA\u8EAB\u5185\u529F\u3002")],-1),b={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSf6ZVcGFOtRnjzJq3B4dIZr6SYE8SqGxPs8Xv0CLJeYrfv8cro8ibTHQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},o=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSf6ZVcGFOtRnjzJq3B4dIZr6SYE8SqGxPs8Xv0CLJeYrfv8cro8ibTHQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),p=n("h2",{id:"\u4E00\u3001\u8BBE\u8BA1\u539F\u5219",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E00\u3001\u8BBE\u8BA1\u539F\u5219","aria-hidden":"true"},"#"),i(" \u4E00\u3001\u8BBE\u8BA1\u539F\u5219")],-1),h={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSSX1HZxby4BOu2eic8qc1xojGdpYvOic9tCVat18j8aOo1xTJ0ZQFnJzg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},g=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSSX1HZxby4BOu2eic8qc1xojGdpYvOic9tCVat18j8aOo1xTJ0ZQFnJzg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),x=n("h2",{id:"\u4E8C\u3001\u521B\u5EFA\u578B\u6A21\u5F0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E8C\u3001\u521B\u5EFA\u578B\u6A21\u5F0F","aria-hidden":"true"},"#"),i(" \u4E8C\u3001\u521B\u5EFA\u578B\u6A21\u5F0F")],-1),_=n("blockquote",null,[n("p",null,"\u521B\u5EFA\u578B\u6A21\u5F0F\u5305\u542B\u5355\u4F8B\u6A21\u5F0F\u3001\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F\u3001\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F\u3001\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F\u3001\u539F\u578B\u6A21\u5F0F\u3001\u5EFA\u9020\u8005\u6A21\u5F0F\u3002\u521B\u5EFA\u578B\u6A21\u5F0F\u5C31\u662F\u521B\u5EFA\u5BF9\u8C61\u7684\u6A21\u5F0F\uFF0C\u62BD\u8C61\u4E86\u5B9E\u4F8B\u5316\u7684\u8FC7\u7A0B\u3002\u5B83\u5E2E\u52A9\u4E00\u4E2A\u7CFB\u7EDF\u72EC\u7ACB\u4E8E\u5982\u4F55\u521B\u5EFA\u3001\u7EC4\u5408\u548C\u8868\u793A\u5B83\u7684\u90A3\u4E9B\u5BF9\u8C61\u3002\u5173\u6CE8\u7684\u662F\u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u521B\u5EFA\u578B\u6A21\u5F0F\u5C06\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\u8FDB\u884C\u4E86\u62BD\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3A\u5C06\u521B\u5EFA\u5BF9\u8C61\u7684\u8FC7\u7A0B\u8FDB\u884C\u4E86\u5C01\u88C5\uFF0C\u4F5C\u4E3A\u5BA2\u6237\u7A0B\u5E8F\u4EC5\u4EC5\u9700\u8981\u53BB\u4F7F\u7528\u5BF9\u8C61\uFF0C\u800C\u4E0D\u518D\u5173\u5FC3\u521B\u5EFA\u5BF9\u8C61\u8FC7\u7A0B\u4E2D\u7684\u903B\u8F91\u3002")],-1),w=n("h3",{id:"_2-1-\u5355\u4F8B\u6A21\u5F0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-1-\u5355\u4F8B\u6A21\u5F0F","aria-hidden":"true"},"#"),i(" 2.1 \u5355\u4F8B\u6A21\u5F0F")],-1),f={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSvLc8sMB3cqQ6D6oxklibKfCDQrbF7sNT0WzPibN8Ikic36j28M20iaDa0A/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},A=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSvLc8sMB3cqQ6D6oxklibKfCDQrbF7sNT0WzPibN8Ikic36j28M20iaDa0A/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),C=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u997F\u6C49\u5F0F
class Singleton1 {
    // 1. \u6784\u9020\u5668\u79C1\u6709\u5316\uFF0C\u5916\u90E8\u4E0D\u80FDnew
    privateconstructor(){}

    // 2. \u672C\u7C7B\u5185\u90E8\u521B\u5EFA\u5BF9\u8C61\u5B9E\u4F8B\u5316
    private static instance : Singleton1 = new Singleton1();

    // 3. \u63D0\u4F9B\u4E00\u4E2A\u516C\u6709\u7684\u9759\u6001\u65B9\u6CD5\uFF0C\u8FD4\u56DE\u5B9E\u4F8B\u5BF9\u8C61
    public static getInstance() : Singleton1 {
        return this.instance;
    }
}

console.log(Singleton1.getInstance(), &#39;11111&#39;);

// \u61D2\u6C49\u5F0F
class Singleton2 {
    privateconstructor(){}

    private static instance: Singleton2 = null;

    public static getInstance() : Singleton2 {
if (this.instance === null) {
            this.instance = new Singleton2();
        }

        return this.instance;
    }
}

console.log(Singleton2.getInstance(), &#39;2222&#39;)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7B80\u5355\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 2.2 \u7B80\u5355\u5DE5\u5382\u6A21\u5F0F</h3>`,2),y={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHStnZ5CyGd8eZSM47aLaATtAFP2dJsvhiaqlguMsLQ7icVzfYze28GItGA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},S=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHStnZ5CyGd8eZSM47aLaATtAFP2dJsvhiaqlguMsLQ7icVzfYze28GItGA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),q=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u62BD\u8C61\u4EA7\u54C1\u63A5\u53E3
interface Product{}

// \u5177\u4F53\u4EA7\u54C1\u4E00
class ConcreteProduct1 implements Product {
constructor(){}
}

// \u5177\u4F53\u4EA7\u54C1\u4E8C
class ConcreteProduct2 implements Product {
constructor(){}
}

// \u7B80\u5355\u5DE5\u5382
class SimpleFactory {
    public static createProduct(type : number) : Product {
        let product = null;
if (type === 1) {
            product = new ConcreteProduct1();
        }elseif ( type === 2) {
            product = new ConcreteProduct2();
        }

        return product;
    }
}

// \u4F7F\u7528
let product = SimpleFactory.createProduct(1);
console.log(product);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-3-\u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 2.3 \u5DE5\u5382\u65B9\u6CD5\u6A21\u5F0F</h3>`,2),E={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSa6EPfNxTZIYEibEK6AHzvwrm9NZZaB0um2AgWZDTficcDm6kxI2UicCkQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},j=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSa6EPfNxTZIYEibEK6AHzvwrm9NZZaB0um2AgWZDTficcDm6kxI2UicCkQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),z=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u62BD\u8C61\u4EA7\u54C1\u63A5\u53E3
interface Product2{
    method1() : void;
    method2() : void;
}

// \u5177\u4F53\u4EA7\u54C1\u4E00
class ConcreteProduct_1 implements Product2 {
constructor(){}
method1() {

    }
method2() {

    }
}

// \u5177\u4F53\u4EA7\u54C1\u4E8C
class ConcreteProduct_2 implements Product2 {
constructor(){}
method1() {

    }
method2() {

    }
}

// \u62BD\u8C61\u5DE5\u5382
abstract class Creator {
    public abstract createProduct(type : number) : Product;
}

// \u5177\u4F53\u5DE5\u5382
class ConcreteCreator extends Creator {
constructor(){
        super();
    }

    public createProduct(type : number) : Product {
        let product = null;
if (type === 1) {
            product = new ConcreteProduct_1();
        }elseif (type === 2) {
            product = new ConcreteProduct_2();
        }
        return product;
    }
}

// \u4F7F\u7528
const creator : Creator = new ConcreteCreator();
const myProduct : Product = creator.createProduct(1);

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-4-\u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F" aria-hidden="true">#</a> 2.4 \u62BD\u8C61\u5DE5\u5382\u6A21\u5F0F</h3>`,2),k={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHS5Sc3h7112weSwdCNn0WTZViaeaqwuMY0sGvwMdl5Su8qFq5y8u07eOw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},P=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHS5Sc3h7112weSwdCNn0WTZViaeaqwuMY0sGvwMdl5Su8qFq5y8u07eOw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),B=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u62BD\u8C61\u5DE5\u5382\u63A5\u53E3
interface AbstractFactory {
    createProductA() : AbstractProductA;
    createProductB() : AbstractProductB;
}

// \u62BD\u8C61\u4EA7\u54C1A\u63A5\u53E3
interface AbstractProductA {}

// \u62BD\u8C61\u4EA7\u54C1B\u63A5\u53E3
interface AbstractProductB {}

// \u5177\u4F53\u5DE5\u53821
class ConcreteFactory1 implements AbstractFactory {
constructor() {}
    public createProductA() : AbstractProductA {
        return new ConcreteProductA1();
    }
    public createProductB() : AbstractProductB {
        return new ConcreteProductB1();
    }
}

// \u5177\u4F53\u5DE5\u53822
class ConcreteFactory2 implements AbstractFactory {
constructor() {}
    public createProductA() : AbstractProductA {
        return new ConcreteProductA2();
    }
    public createProductB() : AbstractProductB {
        return new ConcreteProductB2();
    }
}

// \u5177\u4F53\u4EA7\u54C1A1
class ConcreteProductA1 implements AbstractProductA {}
// \u5177\u4F53\u4EA7\u54C1A2
class ConcreteProductA2 implements AbstractProductA {}
// \u5177\u4F53\u4EA7\u54C1B1
class ConcreteProductB1 implements AbstractProductB {}
// \u5177\u4F53\u4EA7\u54C1B2
class ConcreteProductB2 implements AbstractProductA {}

// \u4F7F\u7528
const factory1 : AbstractFactory = new ConcreteFactory1();
const factory2 : AbstractFactory = new ConcreteFactory2();
const productA1 : AbstractProductA = factory1.createProductA();
const productA2 : AbstractProductA = factory2.createProductA();
const productB1 : AbstractProductB = factory1.createProductB();
const productB2 : AbstractProductB = factory2.createProductB();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-\u539F\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-5-\u539F\u578B\u6A21\u5F0F" aria-hidden="true">#</a> 2.5 \u539F\u578B\u6A21\u5F0F</h3>`,2),O={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSP0wIhSCWTIrW8pI8aWlJia3yPsgZB8jRibsEYVVKtib60mvxmbtSC46bw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},D=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSP0wIhSCWTIrW8pI8aWlJia3yPsgZB8jRibsEYVVKtib60mvxmbtSC46bw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),T=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>interface Prototype {
    clone():Prototype;
}

class Dog implements Prototype {
    public name: string;
    public birthYear: number;
    public sex: string;
    public presentYear: number;
constructor() {
        this.name = &quot;lili&quot;;
        this.birthYear = 2015;
        this.sex = &quot;\u7537&quot;;
        this.presentYear = 2018;
    }

    public getDiscription(): string {
        return \`\u72D7\u72D7\u53EB\${this.name},\u6027\u522B\${this.sex},\${this.presentYear}\u5E74\${this.presentYear - this.birthYear}\u5C81\u4E86\`
    }

    // \u5B9E\u73B0\u590D\u5236
    public clone(): Prototype {
        return Object.create(this);
    }
}

// \u4F7F\u7528
const dog = new Dog();
console.log(dog.getDiscription());
dog.presentYear = 2020;
const dog1 = Object.create(dog);
console.log(dog1.getDiscription());

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-6-\u5EFA\u9020\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-6-\u5EFA\u9020\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 2.6 \u5EFA\u9020\u8005\u6A21\u5F0F</h3>`,2),Y={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSDI8bVIcDACy3dX3IBnAmCK707ryXkJFzNn3VoBhS7icxpFE0TL7Fgxw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},I=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSDI8bVIcDACy3dX3IBnAmCK707ryXkJFzNn3VoBhS7icxpFE0TL7Fgxw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),H=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u62BD\u8C61\u5EFA\u9020\u8005
abstract class Builder {
    public abstract buildPartA() : void;
    public abstract buildPartB() : void;
    public abstract buildPartC() : void;
    public abstract buildProduct() : Product;
}

// \u5177\u4F53\u5EFA\u9020\u8005
class ConcreteBuilder extends Builder {
    private product : Product;
    constructor(product : Product) {
        super();
        this.product = product;
    }

    public buildPartA() : void {}
    public buildPartB() : void {}
    public buildPartC() : void {}

    // \u6700\u7EC8\u7EC4\u5EFA\u4E00\u4E2A\u4EA7\u54C1
    public buildProduct() : Product {
        return this.product;
    }
}

// \u4EA7\u54C1\u89D2\u8272
class Product {
    publicdoSomething() : void {
        // \u72EC\u7ACB\u4E1A\u52A1
    }
}

// \u6307\u6325\u8005
class Director {
    private _builder : Builder;
    constructor(builder : Builder) {
        this._builder = builder;
    }

    set builder(builder : Builder) {
        this._builder = builder;
    }

    // \u5C06\u5904\u7406\u5EFA\u9020\u7684\u6D41\u7A0B\u4EA4\u7ED9\u6307\u6325\u8005
    publicconstructorProduct() {
        this._builder.buildPartA();
        this._builder.buildPartB();
        this._builder.buildPartC();
        return this._builder.buildProduct();
    }
}

// \u4F7F\u7528
const builder : Builder = new ConcreteBuilder(new Product());
const director : Director = new Director(builder);
const product : Product = director.constructorProduct();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09\u3001\u7ED3\u6784\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u7ED3\u6784\u578B\u6A21\u5F0F" aria-hidden="true">#</a> \u4E09\u3001\u7ED3\u6784\u578B\u6A21\u5F0F</h2><blockquote><p>\u7ED3\u6784\u578B\u6A21\u5F0F\u5305\u542B\u9002\u914D\u5668\u6A21\u5F0F\u3001\u6865\u63A5\u6A21\u5F0F\u3001\u88C5\u9970\u6A21\u5F0F\u3001\u7EC4\u5408\u6A21\u5F0F\u3001\u5916\u89C2\u6A21\u5F0F\u3001\u4EAB\u5143\u6A21\u5F0F\u3001\u4EE3\u7406\u6A21\u5F0F\u3002\u7ED3\u6784\u578B\u6A21\u5F0F\u4E3A\u89E3\u51B3\u600E\u6837\u7EC4\u88C5\u73B0\u6709\u7684\u7C7B\uFF0C\u8BBE\u8BA1\u4ED6\u4EEC\u7684\u4EA4\u4E92\u65B9\u5F0F\uFF0C\u4ECE\u800C\u8FBE\u5230\u5B9E\u73B0\u4E00\u5B9A\u7684\u529F\u80FD\u3002</p></blockquote><h3 id="_3-1-\u9002\u914D\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-1-\u9002\u914D\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 3.1 \u9002\u914D\u5668\u6A21\u5F0F</h3>`,4),U={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSI8SsOOChEoTicpCbIiazvsdYnJpF0zn8jMloViaIyYic8BuCibY00YChz7w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},N=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSI8SsOOChEoTicpCbIiazvsdYnJpF0zn8jMloViaIyYic8BuCibY00YChz7w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),F=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u7C7B\u9002\u914D\u5668
// \u76EE\u6807\u5BF9\u8C61
interface Target {
    request() : void;
}
// \u88AB\u9002\u914D\u8005
class Adaptee {
constructor() {}
    // \u8FD9\u662F\u6E90\u89D2\u8272\uFF0C\u6709\u81EA\u5DF1\u7684\u7684\u4E1A\u52A1\u903B\u8F91
    public specificRequest() : void {}
}
// \u9002\u914D\u5668
class Adapter extends Adaptee implements Target {
constructor() {
        super();
    }
    public request() : void {
        super.specificRequest();
    }
}

const target : Target = new Adapter();
target.request();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u5BF9\u8C61\u9002\u914D\u5668
// \u76EE\u6807\u5BF9\u8C61
interface Target {
    request() : void;
}
// \u88AB\u9002\u914D\u8005
class Adaptee {
constructor() {}
    // \u8FD9\u662F\u6E90\u89D2\u8272\uFF0C\u6709\u81EA\u5DF1\u7684\u7684\u4E1A\u52A1\u903B\u8F91
    public specificRequest() : void {}
}
// \u9002\u914D\u5668
class Adapter implements Target {
    private adaptee : Adaptee;
    constructor(adaptee : Adaptee) {
        this.adaptee = adaptee;
    }
    public request() : void {
        this.adaptee.specificRequest();
    }
}
// \u4F7F\u7528
const target : Target = new Adapter(new Adaptee());
target.request();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u63A5\u53E3\u9002\u914D\u5668
interface Adaptee {
    operation1() : void;
    operation2() : void;
}

abstract class AbsAdapter implements Adaptee {
    public operation1() : void {}
    public operation2() : void {}
}

class UseClass extends AbsAdapter {
    public operation1() : void {}// \u91CD\u5199\u8BE5\u7C7B
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-\u6865\u63A5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-2-\u6865\u63A5\u6A21\u5F0F" aria-hidden="true">#</a> 3.2 \u6865\u63A5\u6A21\u5F0F</h3>`,4),G={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSqRedw2JHF9JRaC5VJ4icEHnm4ddEX5IG5x6MeqlscxvETVMwkRrCQhw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},M=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSqRedw2JHF9JRaC5VJ4icEHnm4ddEX5IG5x6MeqlscxvETVMwkRrCQhw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),R=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u5B9E\u73B0\u63A5\u53E3\u89D2\u8272
interface Implementor {
doSomething() : void;
doAnything() : void;
}

// \u5177\u4F53\u5B9E\u73B0\u89D2\u8272
class ConcreteImplementor1 implements Implementor {
    publicdoSomething() : void {

    }
    publicdoAnything() : void {

    }
}
class ConcreteImplementor2 implements Implementor {
    publicdoSomething() : void {

    }
    publicdoAnything() : void {

    }
}

// \u62BD\u8C61\u7C7B
abstract class Abstraction {
    private imp : Implementor;
    constructor(imp : Implementor) {
        this.imp = imp;
    }

    // \u81EA\u8EAB\u7684\u884C\u4E3A\u548C\u5C5E\u6027
    public request() : void {
        this.imp.doSomething();
    }
}
// \u5177\u4F53\u62BD\u8C61\u5316\u89D2\u8272
class RefinedAbstraction extends Abstraction {
    constructor(imp : Implementor) {
        super(imp);
    }

    public request() : void {
        // \u81EA\u5DF1\u5199\u4E00\u4E9B\u5904\u7406\u4E1A\u52A1
        super.request();
    }
}

// \u8C03\u7528
// \u5B9A\u4E49\u4E00\u4E2A\u5B9E\u73B0\u5316\u89D2\u8272
const imp : Implementor = new ConcreteImplementor1();
// \u5B9A\u4E49\u4E00\u4E2A\u62BD\u8C61\u5316\u89D2\u8272
const abs : Abstraction = new RefinedAbstraction(imp);
// \u6267\u884C\u4E0A\u4E0B\u6587
abs.request();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-\u88C5\u9970\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-3-\u88C5\u9970\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 3.3 \u88C5\u9970\u8005\u6A21\u5F0F</h3>`,2),V={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSjIgmURmCkZzYa3H9zgTKucuSiaADmdfUz1mibwymTbYAUosFZw6cic0mw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},X=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSjIgmURmCkZzYa3H9zgTKucuSiaADmdfUz1mibwymTbYAUosFZw6cic0mw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),Z=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u62BD\u8C61\u6784\u4EF6
abstract class Component {
    public abstract operate() : void;
}

// \u5177\u4F53\u6784\u4EF6
class ConcreteComponent extends Component {
    public operate() : void {
        console.log(&#39;do something&#39;);
    }
}

// \u88C5\u9970\u89D2\u8272
abstract class Decorator extends Component {
    private component : Component = null;
    constructor(component : Component ) {
        super();
        this.component = component;
    }

    public operate() : void {
        this.component.operate();
    }
}

// \u5177\u4F53\u88C5\u9970\u8005
class ConcreteDecoratorA extends Decorator {
    constructor(component : Component) {
        super(component);
    }

    // \u5B9A\u4E49\u81EA\u5DF1\u7684\u4FEE\u9970\u65B9\u6CD5
    private methodA() : void {
        console.log(&#39;methodA\u4FEE\u9970&#39;);
    }

    // \u91CD\u5199\u7236\u7C7B\u65B9\u6CD5
    public operate() : void {
        this.methodA();
        super.operate();
    }
}

class ConcreteDecoratorB extends Decorator {
    constructor(component : Component) {
        super(component);
    }

    // \u5B9A\u4E49\u81EA\u5DF1\u7684\u4FEE\u9970\u65B9\u6CD5
    private methodB() : void {
        console.log(&#39;methodB\u4FEE\u9970&#39;);
    }

    // \u91CD\u5199\u7236\u7C7B\u65B9\u6CD5
    public operate() : void {
        this.methodB();
        super.operate();
    }
}

functionmain() {
    let component : Component = new ConcreteComponent();
    // \u7B2C\u4E00\u6B21\u88C5\u9970
    component = new ConcreteDecoratorA(component);
    // \u7B2C\u4E8C\u6B21\u88C5\u9970
    component = new ConcreteDecoratorB(component);
    // \u88C5\u9970\u540E\u8FD0\u884C
    component.operate();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-\u7EC4\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-4-\u7EC4\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 3.4 \u7EC4\u5408\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class Component {
    protected name : string;
    constructor(name : string) {
        this.name = name;
    }

    public abstractdoOperation() : void;

    public add(component : Component) : void {

    }

    public remove(component : Component) : void {

    }

    public getChildren() : Array&lt;Component&gt; {
        return [];
    }
}

class Composite extends Component {
    // \u6784\u4EF6\u5BB9\u5668
    private componentList : any;
    constructor(name : string) {
        super(name);
        this.componentList = [];
    }

    publicdoOperation() : void {
        console.log(\`\u8FD9\u662F\u5BB9\u5668\${this.name}\uFF0C\u5904\u7406\u4E00\u4E9B\u903B\u8F91\u4E1A\u52A1\uFF01\`);
    }

    public add(component : Component) : void {
        this.componentList.push(component);
    }

    public remove(component : Component) : void {
        const componentIndex = this.componentList.findIndex((value : Component, index : Number) =&gt; {
            return value == component;
        });
        this.componentList.splice(componentIndex, 1);
    }

    public getChildren() : Array&lt;Component&gt; {
        return this.componentList;
    }
}

class Leaf extends Component {
    constructor(name : string) {
        super(name);
    }

    publicdoOperation() : void {
        console.log(\`\u8FD9\u662F\u53F6\u5B50\u8282\u70B9\${this.name}\uFF0C\u5904\u7406\u4E00\u4E9B\u903B\u8F91\u4E1A\u52A1\uFF01\`);
    }
}

functionmain() {
    const root : Component  = new Composite(&#39;root&#39;);
    const node1 : Component = new Leaf(&#39;1&#39;);
    const node2 : Component = new Composite(&#39;2&#39;);
    const node3 : Component = new Leaf(&#39;3&#39;);

    root.add(node1);
    root.add(node2);
    root.add(node3);

    const node2_1 : Component = new Leaf(&quot;2_1&quot;);
    node2.add(node2_1);

    const children1 = root.getChildren();
    console.log(children1);

    root.remove(node2);

    const children2 = root.getChildren();
    console.log(children2);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-\u5916\u89C2\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-5-\u5916\u89C2\u6A21\u5F0F" aria-hidden="true">#</a> 3.5 \u5916\u89C2\u6A21\u5F0F</h3>`,4),J={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSP06ZqQxY1SguTt4ddczPhYbZMhoGibGE6R2oenh9DJKoiarrqnEBaibGQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},L=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSP06ZqQxY1SguTt4ddczPhYbZMhoGibGE6R2oenh9DJKoiarrqnEBaibGQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),Q=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>class SubSystemA {
    publicdoOperationA() : void {
        console.log(&#39;\u5B50\u7CFB\u7EDFA\u7684\u4E3E\u52A8&#39;);
    }
}

class SubSystemB {
    publicdoOperationB() : void {
        console.log(&#39;\u5B50\u7CFB\u7EDFB\u7684\u4E3E\u52A8&#39;);
    }
}

class Facade {
    private subSystemA : SubSystemA;
    private subSystemB : SubSystemB;
constructor() {
        this.subSystemA = new SubSystemA();
        this.subSystemB = new SubSystemB();
    }

    publicdoOperation() : void {
        this.subSystemA.doOperationA();
        this.subSystemB.doOperationB();
    }
}

functionmain() {
    const facade : Facade = new Facade();
    facade.doOperation();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-\u4EAB\u5143\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-6-\u4EAB\u5143\u6A21\u5F0F" aria-hidden="true">#</a> 3.6 \u4EAB\u5143\u6A21\u5F0F</h3>`,2),K={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHS4HgIcD7FibU4CRkKVO3Rhl1nEvyiaM9uoI9LvH1jHdLXReheFKbC1grw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},W=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHS4HgIcD7FibU4CRkKVO3Rhl1nEvyiaM9uoI9LvH1jHdLXReheFKbC1grw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),$=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class Flyweight {
    public abstractdoOperation(extrinsicState : string) : void;
}

class ConcreteFlyweight extends Flyweight {
    private intrinsicState : string;
    constructor(intrinsicState : string) {
        super();
        this.intrinsicState = intrinsicState;
    }

    publicdoOperation(extrinsicState : string) : void {
        console.log(\`\u8FD9\u662F\u5177\u4F53\u4EAB\u5143\u89D2\u8272\uFF0C\u5185\u90E8\u72B6\u6001\u4E3A\${this.intrinsicState},\u5916\u90E8\u72B6\u6001\u4E3A\${extrinsicState}\`);
    }
}

interface flyweightObject {
    [key : string] : Flyweight
}

class FlyweightFactory {
    private flyweights : flyweightObject;
constructor() {
        this.flyweights = {};
    }

    public getFlyweight(intrinsicState : string) : Flyweight {
if (!this.flyweights[intrinsicState]) {
            const flyweight : Flyweight = new ConcreteFlyweight(intrinsicState);
            this.flyweights[intrinsicState] = flyweight;
        }
        return this.flyweights[intrinsicState];
    }
}

functionmain() {
    const factory : FlyweightFactory = new FlyweightFactory();
    const flyweight1 : Flyweight = factory.getFlyweight(&quot;aa&quot;);
    const flyweight2 : Flyweight = factory.getFlyweight(&quot;aa&quot;);
    flyweight1.doOperation(&#39;x&#39;);
    flyweight2.doOperation(&#39;y&#39;);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7-\u4EE3\u7406\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3-7-\u4EE3\u7406\u6A21\u5F0F" aria-hidden="true">#</a> 3.7 \u4EE3\u7406\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u9759\u6001\u4EE3\u7406
interface Subject {
doOperation() : void;
}

class RealSubject implements Subject {
    publicdoOperation() {
        console.log(&#39;\u6211\u662FRealSubject\u7C7B\uFF0C\u6B63\u5728\u6267\u884C&#39;);
    }
}

class MyProxy implements Subject {
    private target : Subject;
    constructor(realSubject : Subject) {
        this.target = realSubject;
    }

    publicdoOperation() {
        console.log(&#39;\u6211\u662F\u4EE3\u7406\u7C7B&#39;);
        this.target.doOperation();
    }
}

functionmain() {
    const realSubject : Subject = new RealSubject();
    const myProxy : Subject = new MyProxy(realSubject);

    myProxy.doOperation();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u52A8\u6001\u4EE3\u7406
interface Subject {
doOperation() : void;
}

class RealSubject implements Subject {
constructor() {}

    publicdoOperation() : void {
        console.log(&#39;\u6211\u662FRealSubject\u7C7B\uFF0C\u6B63\u5728\u6267\u884C&#39;);
    }
}

class ProxyFactory {
    private target : any;
    constructor(target : any) {
        this.target = target;
    }

    public getProxyInstance() : any {
        return new Proxy(this.target, {
            get: (target, propKey) =&gt; {
                // \u505A\u7684\u4E00\u4E9B\u62E6\u622A\u5904\u7406
                return target[propKey];
            }
        });
    }
}

functionmain() {
    const target : Subject = new RealSubject();
    const proxyInstance : Subject = &lt;Subject&gt;new ProxyFactory(target).getProxyInstance();

    proxyInstance.doOperation();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56DB\u3001\u884C\u4E3A\u578B\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u884C\u4E3A\u578B\u6A21\u5F0F" aria-hidden="true">#</a> \u56DB\u3001\u884C\u4E3A\u578B\u6A21\u5F0F</h2><blockquote><p>\u884C\u4E3A\u578B\u6A21\u5F0F\u5305\u542B\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F\u3001\u547D\u4EE4\u6A21\u5F0F\u3001\u8BBF\u95EE\u8005\u6A21\u5F0F\u3001\u8FED\u4EE3\u5668\u6A21\u5F0F\u3001\u89C2\u5BDF\u8005\u6A21\u5F0F\u3001\u4E2D\u4ECB\u8005\u6A21\u5F0F\u3001\u5907\u5FD8\u5F55\u6A21\u5F0F\u3001\u89E3\u91CA\u5668\u6A21\u5F0F\uFF08Interpreter\u6A21\u5F0F\uFF09\u3001\u72B6\u6001\u6A21\u5F0F\u3001\u7B56\u7565\u6A21\u5F0F\u3001\u804C\u8D23\u94FE\u6A21\u5F0F\uFF08\u8D23\u4EFB\u94FE\u6A21\u5F0F\uFF09\u3002\u884C\u4E3A\u578B\u6A21\u5F0F\u5BF9\u5728\u4E0D\u540C\u7684\u5BF9\u8C61\u4E4B\u95F4\u5212\u5206\u8D23\u4EFB\u548C\u7B97\u6CD5\u7684\u62BD\u8C61\u5316\uFF0C\u884C\u4E3A\u578B\u6A21\u5F0F\u4E0D\u4EC5\u4EC5\u5173\u6CE8\u7C7B\u548C\u5BF9\u8C61\u7684\u7ED3\u6784\uFF0C\u800C\u4E14\u91CD\u70B9\u5173\u6CE8\u4ED6\u4EEC\u4E4B\u95F4\u7684\u76F8\u4E92\u4F5C\u7528\uFF0C\u901A\u8FC7\u884C\u4E3A\u578B\u6A21\u5F0F\uFF0C\u53EF\u4EE5\u66F4\u52A0\u6E05\u6670\u5730\u5212\u5206\u7C7B\u4E0E\u5BF9\u8C61\u7684\u804C\u8D23\uFF0C\u5E76\u7814\u7A76\u7CFB\u7EDF\u5728\u8FD0\u884C\u65F6\u5B9E\u4F8B\u5BF9\u8C61\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002</p></blockquote><h3 id="_4-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-1-\u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F" aria-hidden="true">#</a> 4.1 \u6A21\u677F\u65B9\u6CD5\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class AbstractClass {
constructor() {}

    // \u6A21\u677F\u65B9\u6CD5
    public template() : void {
        this.operation1();
        this.hookMethod() &amp;&amp; this.operation2();
        this.operation3();
    }

    // \u57FA\u672C\u65B9\u6CD5
    protected operation1() : void {
        console.log(&#39;\u4F7F\u7528\u4E86\u65B9\u6CD5operation1&#39;);
    }

    protected operation2() : void {
        console.log(&#39;\u4F7F\u7528\u4E86\u65B9\u6CD5operation2&#39;);
    }

    protected operation3() : void {
        console.log(&#39;\u4F7F\u7528\u4E86\u65B9\u6CD5operation3&#39;);
    }

    // \u94A9\u5B50\u65B9\u6CD5
    protected hookMethod() : boolean {
        return true;
    }
}

class ConcreteClassA extends AbstractClass {
    protected operation2() :void {
        console.log(&#39;\u5BF9\u8BE5\u65B9\u6CD5operation2\u8FDB\u884C\u4E86\u4FEE\u6539\u518D\u4F7F\u7528&#39;);
    }

    protected operation3() :void {
        console.log(&#39;\u5BF9\u8BE5\u65B9\u6CD5operation3\u8FDB\u884C\u4E86\u4FEE\u6539\u518D\u4F7F\u7528&#39;);
    }
}

class ConcreteClassB extends AbstractClass {
    // \u8986\u76D6\u94A9\u5B50\u65B9\u6CD5
    protected hookMethod() : boolean {
        return false;
    }
}

functionmain() {
    const class1 : AbstractClass = new ConcreteClassA();
    const class2 : AbstractClass = new ConcreteClassB();

    class1.template();
    class2.template();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-\u547D\u4EE4\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-2-\u547D\u4EE4\u6A21\u5F0F" aria-hidden="true">#</a> 4.2 \u547D\u4EE4\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>interface Command {
    execute() : void;
    undo() : void;
}

// \u5F00\u542F\u547D\u4EE4
class ConcreteCommandOn implements Command {
    private receiver : Receiver;
    constructor(receiver : Receiver) {
        this.receiver = receiver;
    }

    // \u6267\u884C\u547D\u4EE4\u7684\u65B9\u6CD5
    public execute() : void {
        this.receiver.actionOn();
    }

    // \u64A4\u9500\u547D\u4EE4\u7684\u65B9\u6CD5
    public undo() : void {
        this.receiver.actionOff();
    }
}

// \u5173\u95ED\u547D\u4EE4
class ConcreteCommandOff implements Command {
    private receiver : Receiver;
    constructor(receiver : Receiver) {
        this.receiver = receiver;
    }

    // \u6267\u884C\u547D\u4EE4\u7684\u65B9\u6CD5
    public execute() : void {
        this.receiver.actionOff();
    }

    // \u64A4\u9500\u547D\u4EE4\u7684\u65B9\u6CD5
    public undo() : void {
        this.receiver.actionOn();
    }
}

// \u7A7A\u547D\u4EE4\uFF08\u7701\u53BB\u5224\u7A7A\u64CD\u4F5C\uFF09
class NoCommand implements Command {
    public execute() : void {}
    public undo() : void {}
}

class Receiver {
    public actionOn() : void {
        console.log(&#39;\u6211\u662F\u547D\u4EE4\u63A5\u6536\u8005\uFF0C\u5F00\u542F\u4E86\u67D0\u52A8\u4F5C&#39;);
    }
    public actionOff() : void {
        console.log(&#39;\u6211\u662F\u547D\u4EE4\u63A5\u6536\u8005\uFF0C\u5173\u95ED\u4E86\u67D0\u52A8\u4F5C&#39;);
    }
}

class Invoker {
    private onCommands : Array&lt;Command&gt;;
    private offCommands : Array&lt;Command&gt;;
    private undoCommand : Command;
    private slotNum : number = 7;
constructor() {
        this.undoCommand = new NoCommand();
        this.onCommands = [];
        this.offCommands = [];

for (let i = 0; i &lt; this.slotNum; i++) {
            this.onCommands[i] = new NoCommand();
            this.offCommands[i] =  new NoCommand();
        }
    }

    public setCommand(index : number, onCommand : Command, offCommand : Command) : void {
        this.onCommands[index] = onCommand;
        this.offCommands[index] = offCommand;
    }

    // \u5F00\u542F
    public on (index : number) : void {
        this.onCommands[index].execute();// \u8C03\u7528\u76F8\u5E94\u65B9\u6CD5
        //\u8BB0\u5F55\u8FD9\u6B21\u64CD\u4F5C\uFF0C\u7528\u4E8E\u64A4\u9500
        this.undoCommand = this.onCommands[index];
    }

    // \u5173\u95ED
    public off (index : number) : void {
        this.offCommands[index].execute();
        this.undoCommand = this.offCommands[index];
    }

    // \u64A4\u9500
    public undo () : void {
        this.undoCommand.undo();
    }
}

functionmain() {
    // \u521B\u5EFA\u63A5\u6536\u8005
    const receiver : Receiver = new Receiver();

    // \u521B\u5EFA\u547D\u4EE4
    const commandOn : Command = new ConcreteCommandOn(receiver);
    const commandOff : Command = new ConcreteCommandOff(receiver);

    // \u521B\u5EFA\u8C03\u7528\u8005
    const invoker : Invoker = new Invoker();
    invoker.setCommand(0, commandOn, commandOff);

    invoker.on(0);
    invoker.off(0);
    invoker.undo();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-\u8BBF\u95EE\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-3-\u8BBF\u95EE\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.3 \u8BBF\u95EE\u8005\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class AbstractElement {
    // \u5B9A\u4E49\u4E1A\u52A1\u903B\u8F91
    public abstractdoSomething() : void;
    // \u5141\u8BB8\u8C01\u6765\u8BBF\u95EE
    public abstract accept (visitor : Visitor) : void;
}

class ConcreteElement1 extends AbstractElement{
    publicdoSomething() : void {
        console.log(&#39;ConcreteElement1\u6267\u884C\u7684\u4E1A\u52A1\u903B\u8F91&#39;);
    }

    public accept(visitor : Visitor) : void {
        visitor.visit1(this)
    }
}

class ConcreteElement2 extends AbstractElement{
    publicdoSomething() : void {
        console.log(&#39;ConcreteElement1\u6267\u884C\u7684\u4E1A\u52A1\u903B\u8F91&#39;);
    }

    public accept(visitor : Visitor) : void {
        visitor.visit2(this)
    }
}

abstract class Visitor {
    public abstract visit1(element1 : ConcreteElement1) : void;
    public abstract visit2(element2 : ConcreteElement2) : void;
}

class ConcreteVistor extends Visitor {
    public visit1(element1 : ConcreteElement1) : void {
        console.log(&#39;\u8FDB\u5165\u5904\u7406element1&#39;)
        element1.doSomething();
    }

    public visit2(element2 : ConcreteElement2) : void {
        console.log(&#39;\u8FDB\u5165\u5904\u7406element2&#39;);
        element2.doSomething();
    }
}

// \u6570\u636E\u7ED3\u6784\uFF0C\u7BA1\u7406\u5F88\u591A\u5143\u7D20\uFF08ConcreteElement1\uFF0CConcreteElement1\uFF09
class ObjectStructure {
    private listSet : Set&lt;AbstractElement&gt;;
constructor() {
        this.listSet = new Set();
    }

    // \u589E\u52A0
    public attach(element : AbstractElement) : void {
        this.listSet.add(element);
    }

    // \u5220\u9664
    public detach(element : AbstractElement) : void {
        this.listSet.delete(element);
    }

    // \u663E\u793A
    public display(visitor : Visitor) : void {
for (let element of this.listSet.values()) {
            element.accept(visitor);
        }
    }
}

functionmain() {
    const objectStructure : ObjectStructure = new ObjectStructure();
    objectStructure.attach(new ConcreteElement1());
    objectStructure.attach(new ConcreteElement2());

    const visitor :Visitor = new ConcreteVistor();

    objectStructure.display(visitor);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-\u8FED\u4EE3\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-4-\u8FED\u4EE3\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 4.4 \u8FED\u4EE3\u5668\u6A21\u5F0F</h3>`,13),nn={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSicUh9Nkn36k64mS14rlQs2g5K7qvquYHyoYCLeMvVUyGj7tuDibsCwIQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},en=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSicUh9Nkn36k64mS14rlQs2g5K7qvquYHyoYCLeMvVUyGj7tuDibsCwIQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),sn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>interface AbstractIterator {
    next() : any;
    hasNext() : boolean;
    remove() : boolean;
}

class ConcreteIterator implements  AbstractIterator {
    private list : any[];
    public cursor : number = 0;
    constructor(array : any[]) {
        this.list = array;
    }

    public next() : any {
        return this.hasNext() ? this.list[this.cursor++] : null;
    }

    public hasNext() : boolean {
        return this.cursor &lt; this.list.length;
    }

    public remove() : boolean{
        this.list.splice(this.cursor--, 1);
        return true;
    }
}

interface Aggregate {
    add(value : any) : void;
    remove(value : any) : void;
    createIterator() : AbstractIterator;
}

class ConcreteAggregate implements Aggregate {
    // \u5BB9\u7EB3\u5BF9\u8C61\u7684\u5BB9\u5668
    private list : any[];
constructor() {
        this.list = [];
    }

    add(value : any) : void {
        this.list.push(value)
    }

    remove(value : any) : void {
        const index = this.list.findIndex((listValue) =&gt; {
            return value === listValue;
        });
        this.list.splice(index, 1);
    }

    createIterator() : AbstractIterator {
        return new ConcreteIterator(this.list);
    }
}

functionmain() {
    const aggregate : Aggregate = new ConcreteAggregate();
    aggregate.add(&#39;11111&#39;);
    aggregate.add(&#39;222222&#39;);

    const iterator : AbstractIterator = aggregate.createIterator();
while(iterator.hasNext()) {
        console.log(iterator.next());
    }
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5-\u89C2\u5BDF\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-5-\u89C2\u5BDF\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.5 \u89C2\u5BDF\u8005\u6A21\u5F0F</h3>`,2),ln={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSEPqlbTW0AyrUnZmUhle8gvqqq6l7B5KZZkTsmxhtQCL7yg74vJ9Mrw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},dn=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSEPqlbTW0AyrUnZmUhle8gvqqq6l7B5KZZkTsmxhtQCL7yg74vJ9Mrw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),rn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u89C2\u5BDF\u8005\u6A21\u5F0F
interface AbstractSubject {
    registerObserver(observer : Observer) : void;
    remove(observer : Observer) : void;
    notifyObservers() : void;
}

class ConcreteSubject implements AbstractSubject {
    private observers : Array&lt;Observer&gt;;

constructor() {
        this.observers = [];
    }

    public registerObserver(observer : Observer) : void {
        this.observers.push(observer);
    };

    public remove(observer : Observer) : void {
        const observerIndex = this.observers.findIndex(value =&gt; {
            return value == observer;
        })

        observerIndex &gt;= 0 &amp;&amp; this.observers.splice(observerIndex, 1);
    };

    public notifyObservers() : void {
        this.observers.forEach(observer =&gt; observer.update())
    };
}

interface Observer {
    update() : void;
}

class ConcreteObserver1 implements Observer {
    public update() : void {
        console.log(&#39;\u5DF2\u7ECF\u6267\u884C\u66F4\u65B0\u64CD\u4F5C1\uFF0C\u503C\u4E3A&#39;);
    }
}
class ConcreteObserver2 implements Observer {
    public update() : void {
        console.log(&#39;\u5DF2\u7ECF\u6267\u884C\u66F4\u65B0\u64CD\u4F5C2\uFF0C\u503C\u4E3A&#39;);
    }
}

functionmain() {
    const subject : AbstractSubject = new ConcreteSubject();
    const observer1 : Observer = new ConcreteObserver1();
    const observer2 : Observer = new ConcreteObserver2();

    subject.registerObserver(observer1);
    subject.registerObserver(observer2);

    subject.notifyObservers();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F
interface Publish {
    registerObserver(eventType : string, subscribe : Subscribe) : void;
    remove(eventType : string, subscribe ?: Subscribe) : void;
    notifyObservers(eventType : string) : void;
}
interface SubscribesObject{
    [key : string] : Array&lt;Subscribe&gt;
}
class ConcretePublish implements Publish {
    private subscribes : SubscribesObject;

constructor() {
        this.subscribes = {};
    }

    registerObserver(eventType : string, subscribe : Subscribe) : void {
if (!this.subscribes[eventType]) {
            this.subscribes[eventType] = [];
        }

        this.subscribes[eventType].push(subscribe);
    }

    remove(eventType : string, subscribe ?: Subscribe) : void {
        const subscribeArray = this.subscribes[eventType];
if (subscribeArray) {
if (!subscribe) {
                delete this.subscribes[eventType];
            }else {
for (let i = 0; i &lt; subscribeArray.length; i++) {
if (subscribe === subscribeArray[i]) {
                        subscribeArray.splice(i, 1);
                    }
                }
            }
        }
    }

    notifyObservers(eventType : string, ...args : any[]) : void {
        const subscribes = this.subscribes[eventType];
if (subscribes) {
            subscribes.forEach(subscribe =&gt; subscribe.update(...args))
        }
    }
}

interface Subscribe {
    update(...value : any[]) : void;
}

class ConcreteSubscribe1 implements Subscribe {
    public update(...value : any[]) : void {
        console.log(&#39;\u5DF2\u7ECF\u6267\u884C\u66F4\u65B0\u64CD\u4F5C1\uFF0C\u503C\u4E3A&#39;, ...value);
    }
}
class ConcreteSubscribe2 implements Subscribe {
    public update(...value : any[]) : void {
        console.log(&#39;\u5DF2\u7ECF\u6267\u884C\u66F4\u65B0\u64CD\u4F5C2\uFF0C\u503C\u4E3A&#39;, ...value);
    }
}

functionmain() {
    const publish = new ConcretePublish();
    const subscribe1 = new ConcreteSubscribe1();
    const subscribe2 = new ConcreteSubscribe2();

    publish.registerObserver(&#39;1&#39;, subscribe1);
    publish.registerObserver(&#39;2&#39;, subscribe2);

    publish.notifyObservers(&#39;2&#39;, &#39;22222&#39;);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-6-\u4E2D\u4ECB\u8005\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-6-\u4E2D\u4ECB\u8005\u6A21\u5F0F" aria-hidden="true">#</a> 4.6 \u4E2D\u4ECB\u8005\u6A21\u5F0F</h3>`,3),vn={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSibmVL8OGV33QM2VHAic19dwiaL3wFKprLDmj9dUnwAO9axATHUw5sZwEA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},an=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSibmVL8OGV33QM2VHAic19dwiaL3wFKprLDmj9dUnwAO9axATHUw5sZwEA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),cn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class Colleague {
    public abstract onEvent(eventType : string) : void;
}

class ConcreteColleagueA extends Colleague{
    private mediator : Mediator;
    constructor(mediator : Mediator) {
        super();
        this.mediator = mediator;
    }
    public onEvent(eventType : string) : void {
        this.mediator.doEvent(eventType);
    }

    // \u81EA\u5DF1\u7684\u4E00\u4E9B\u4E8B\u60C5
    publicdoSomething() : void {
        console.log(&#39;A\u88AB\u8FD0\u884C\u4E86&#39;);
    }
}

class ConcreteColleagueB extends Colleague {
    private mediator : Mediator;
    constructor(mediator : Mediator) {
        super();
        this.mediator = mediator;
    }

    public onEvent(eventType : string) : void {
        this.mediator.doEvent(eventType);
    }

    // \u81EA\u5DF1\u7684\u4E00\u4E9B\u4E8B\u60C5
    publicdoSomething() : void {
        console.log(&#39;B\u88AB\u8FD0\u884C\u4E86&#39;);
    }
}

abstract class Mediator {
    protected _colleagueA ?: ConcreteColleagueA;
    protected _colleagueB ?: ConcreteColleagueB;

    set colleagueA(colleagueA : ConcreteColleagueA) {
        this._colleagueA = colleagueA;
    }

    set colleagueB(colleagueB : ConcreteColleagueB) {
        this._colleagueB = colleagueB;
    }
    public abstractdoEvent(eventType : string) : void;
}

class ConcreteMediator extends Mediator {
    //1. \u6839\u636E\u5F97\u5230\u6D88\u606F\uFF0C\u5B8C\u6210\u5BF9\u5E94\u4EFB\u52A1
	//2. \u4E2D\u4ECB\u8005\u5728\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u534F\u8C03\u5404\u4E2A\u5177\u4F53\u7684\u540C\u4E8B\u5BF9\u8C61\uFF0C\u5B8C\u6210\u4EFB\u52A1
    publicdoEvent(eventType : string) : void {
        switch (eventType) {
case &quot;A&quot;: {
                this.doColleagueAEvent();
                break;
            }
case &quot;B&quot;: {
                this.doColleagueBEvent();
                break;
            }
            default: {

            }
        }
    }

    // \u76F8\u5E94\u4E1A\u52A1\u903B\u8F91
    publicdoColleagueAEvent() : void {
        super._colleagueA &amp;&amp; super._colleagueA.doSomething();
        super._colleagueB &amp;&amp; super._colleagueB.doSomething();
        console.log(&#39;A-B\u6267\u884C\u5B8C\u6BD5&#39;);
    }

    publicdoColleagueBEvent() : void {
        super._colleagueB &amp;&amp; super._colleagueB.doSomething();
        super._colleagueA &amp;&amp; super._colleagueA.doSomething();
        console.log(&#39;B-A\u6267\u884C\u5B8C\u6BD5&#39;);
    }
}

functionmain() {
    const mediator : Mediator = new ConcreteMediator();
    const myColleagueA : ConcreteColleagueA = new ConcreteColleagueA(mediator);
    const myColleagueB : ConcreteColleagueB = new ConcreteColleagueB(mediator);
    mediator.colleagueA = myColleagueA;
    mediator.colleagueB = myColleagueB;

    myColleagueA.onEvent(&#39;A&#39;);
    myColleagueB.onEvent(&#39;B&#39;);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-7-\u5907\u5FD8\u5F55\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-7-\u5907\u5FD8\u5F55\u6A21\u5F0F" aria-hidden="true">#</a> 4.7 \u5907\u5FD8\u5F55\u6A21\u5F0F</h3>`,2),tn={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSaSDnmWMXJVdB7gpRRF9icicRtPBAkibDqHtCDzibUvtnKO2hwfYyupTTiaQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},un=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSaSDnmWMXJVdB7gpRRF9icicRtPBAkibDqHtCDzibUvtnKO2hwfYyupTTiaQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),mn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>class Originator {
    private _state : string = &#39;&#39;;
constructor() {}

    getstate() {
        return this._state;
    }

    set state(value) {
        this._state = value;
    }

    // \u521B\u5EFA\u4E00\u4E2A\u5907\u5FD8\u5F55
    public createMemento() : Memento {
        console.log(&#39;\u521B\u5EFA\u4E86\u4E00\u4E2A\u5907\u5FD8\u5F55!&#39;);
        return new Memento(this._state);
    }

    // \u6062\u590D\u4E00\u4E2A\u5907\u5FD8\u5F55
    public recoverMemento(memento : Memento) {
        console.log(&#39;\u6062\u590D\u4E86\u4E00\u4E2A\u5907\u5FD8\u5F55!&#39;);
        this.state = memento.state;
    }
}

class Memento {
    private _state : string;
    constructor(state : string) {
        this._state = state;
    }

    get state() : string {
        return this._state;
    }
}

class Caretaker {
    // \u4FDD\u5B58\u4E00\u6B21\u72B6\u6001\u7528\u6B64\uFF0C\u4FDD\u5B58\u591A\u6B21\u7528\u6570\u7EC4
    private memento ?: Memento;

    public getMemento() : Memento | undefined {
        return this.memento;
    }

    public setMemento(memento : Memento) {
        this.memento = memento;
    }
}

functionmain() {
    // \u5B9A\u4E49\u53D1\u8D77\u4EBA
    const originator : Originator = new Originator();
    // \u5B9A\u4E49\u5B88\u62A4\u8005
    const caretaker : Caretaker = new Caretaker();
    // \u521B\u5EFA\u4E00\u4E2A\u5907\u5FD8\u5F55
    const memento : Memento = originator.createMemento();
    // \u5C06\u5907\u5FD8\u5F55\u5B58\u50A8\u5230\u5B88\u62A4\u8005
    caretaker.setMemento(memento);
    // \u6062\u590D\u4E00\u4E2A\u5907\u5FD8\u5F55
    originator.recoverMemento(memento);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-8-\u89E3\u91CA\u5668\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-8-\u89E3\u91CA\u5668\u6A21\u5F0F" aria-hidden="true">#</a> 4.8 \u89E3\u91CA\u5668\u6A21\u5F0F</h3>`,2),bn={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSPURV8m5n8wvTbficoEdrrjuTG5okVbx39avcp0l7B0ZKDFrTMSJ5k5Q/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},on=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSPURV8m5n8wvTbficoEdrrjuTG5okVbx39avcp0l7B0ZKDFrTMSJ5k5Q/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),pn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// \u4EE5\u4E0B\u662F\u4E00\u4E2A\u89C4\u5219\u68C0\u9A8C\u5668\u5B9E\u73B0\uFF0C\u5177\u6709 and \u548C or \u89C4\u5219\uFF0C\u901A\u8FC7\u89C4\u5219\u53EF\u4EE5\u6784\u5EFA\u4E00\u9897\u89E3\u6790\u6811\uFF0C\u7528\u6765\u68C0\u9A8C\u4E00\u4E2A\u6587\u672C\u662F\u5426\u6EE1\u8DB3\u89E3\u6790\u6811\u5B9A\u4E49\u7684\u89C4\u5219\u3002

// \u4F8B\u5982\u4E00\u9897\u89E3\u6790\u6811\u4E3A D And (A Or (B C))\uFF0C\u6587\u672C &quot;D A&quot; \u6EE1\u8DB3\u8BE5\u89E3\u6790\u6811\u5B9A\u4E49\u7684\u89C4\u5219
abstract class Expression {
    public abstract interpreter(str : string) : boolean;
}

class TerminalExpression extends Expression {
    private literal : string;
    constructor(str : string) {
        super();
        this.literal = str;
    }

    public interpreter(str : string) : boolean {
for (let charVal of str) {
if (charVal === this.literal) {
                return true;
            }
        }

        return false;
    }
}

class AndExpression extends Expression {
    private expression1 : Expression;
    private expression2 : Expression;

    constructor(expression1 : Expression, expression2 : Expression) {
        super();
        this.expression1 = expression1;
        this.expression2 = expression2;
    }

    public interpreter(str : string) : boolean {
        return this.expression1.interpreter(str) &amp;&amp; this.expression2.interpreter(str);
    }
}

class OrExpression extends Expression {
    private expression1 : Expression;
    private expression2 : Expression;

    constructor(expression1 : Expression, expression2 : Expression) {
        super();
        this.expression1 = expression1;
        this.expression2 = expression2;
    }

    public interpreter(str : string) : boolean {
        return this.expression1.interpreter(str) || this.expression2.interpreter(str);
    }
}

functionbuildInterpreterTree() {
    const terminal1 : Expression = new TerminalExpression(&#39;A&#39;);
    const terminal2 : Expression = new TerminalExpression(&#39;B&#39;);
    const terminal3 : Expression = new TerminalExpression(&#39;C&#39;);
    const terminal4 : Expression = new TerminalExpression(&#39;D&#39;);

    // B And C
    const alternation1 : Expression = new AndExpression(terminal2, terminal3);
    // A Or (B C)
    const alternation2 : Expression = new OrExpression(terminal1, alternation1);
    // D And (A Or (B C))
    return new AndExpression(terminal4, alternation2);
}

functionmain() {
    const define : Expression = buildInterpreterTree();
    const context1 : string = &quot;D A&quot;;
    const context2 : string = &quot;D B C&quot;;
    console.log(define.interpreter(context1));
    console.log(define.interpreter(context2));
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-9-\u72B6\u6001\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-9-\u72B6\u6001\u6A21\u5F0F" aria-hidden="true">#</a> 4.9 \u72B6\u6001\u6A21\u5F0F</h3>`,2),hn={href:"https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSVwUoCPqF7sTfR1WibIRiaUjMwCqlGPOmkZ9ZkYag2JMo3bhnibp3xETkw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",target:"_blank",rel:"noopener noreferrer"},gn=i("https://mmbiz.qpic.cn/mmbiz_jpg/q4qrl2ddrUuuf0AbNG9xgicYkE3A5DXHSVwUoCPqF7sTfR1WibIRiaUjMwCqlGPOmkZ9ZkYag2JMo3bhnibp3xETkw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"),xn=l(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class State {
    public abstract handle1() : void;
    public abstract handle2() : void;
}

class ConcreteState1 extends State {
    private context : Context;
    constructor(context : Context) {
        super();
        this.context = context;
    }

    // \u672C\u72B6\u6001\u4E0B\u9700\u8981\u5904\u7406\u7684\u903B\u8F91
    public handle1() : void {
        console.log(&#39;State1\u7684\u72B6\u6001\u9700\u8981\u5904\u7406\u7684\u903B\u8F91&#39;);
    }

    // \u5C06\u8FDB\u884C\u72B6\u6001\u8F6C\u79FB
    public handle2() : void {
        this.context.currentState = this.context.STATE2;
        console.log(&#39;\u7531\u72B6\u6001state1\u8F6C\u4E3Astate2&#39;);
    }
}

class ConcreteState2 extends State {
    private context : Context;
    constructor(context : Context) {
        super();
        this.context = context;
    }

    // \u8FDB\u884C\u72B6\u6001\u8F6C\u79FB
    public handle1() : void {
        this.context.currentState = this.context.STATE1;
        console.log(&#39;\u7531\u72B6\u6001state2\u8F6C\u4E3Astate1&#39;);
    }

    // \u672C\u72B6\u6001\u4E0B\u7684\u5904\u7406\u903B\u8F91
    public handle2() : void {
        console.log(&#39;State2\u7684\u72B6\u6001\u9700\u8981\u5904\u7406\u7684\u903B\u8F91&#39;);
    }
}

class Context {
    public STATE1 : State = new ConcreteState1(this);
    public STATE2 : State = new ConcreteState2(this);
    public currentState : State;

constructor() {
        this.currentState = this.STATE1;
    }

    publicdoOperation1() {
        this.currentState?.handle2();
    }
    publicdoOperation2() {
        this.currentState?.handle1();
    }
}

functionmain() {
    const context : Context = new Context();
    context.doOperation1();
    context.doOperation2();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-10-\u7B56\u7565\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-10-\u7B56\u7565\u6A21\u5F0F" aria-hidden="true">#</a> 4.10 \u7B56\u7565\u6A21\u5F0F</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>interface Strategy {
    // \u7B56\u7565\u6A21\u5F0F\u8FD0\u7B97\u6CD5\u5219
doSomething() : void;
}

class ConcreteStrategy1 implements Strategy {
    publicdoSomething() : void {
        console.log(&#39;\u4F7F\u7528\u7684\u7B56\u75651&#39;);
    }
}

class ConcreteStrategy2 implements Strategy {
    publicdoSomething() : void {
        console.log(&#39;\u4F7F\u7528\u7684\u7B56\u75652&#39;);
    }
}

class ContextofStrategy {
    private _strategy : Strategy;
    constructor(strategy : Strategy) {
        this._strategy = strategy;
    }

    set strategy(strategy : Strategy) {
        this._strategy = strategy;
    }

    //\u5C01\u88C5\u540E\u7684\u7B56\u7565\u65B9\u6CD5
doOperation() : void {
        this._strategy.doSomething();
    }
}

functionmain() {
    const strategy1 : Strategy = new ConcreteStrategy1();
    const strategy2 : Strategy = new ConcreteStrategy2();
    const context : ContextofStrategy = new ContextofStrategy(strategy1);
    context.doOperation();
    context.strategy = strategy2;
    context.doOperation();
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-11-\u804C\u8D23\u94FE\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_4-11-\u804C\u8D23\u94FE\u6A21\u5F0F" aria-hidden="true">#</a> 4.11 \u804C\u8D23\u94FE\u6A21\u5F0F</h3><p><a href="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==">data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==</a></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>abstract class Handler {
    // \u4E0B\u4E00\u4E2A\u5904\u7406\u8005
    public successor ?: Handler;
    public name : string;
    constructor(name : string) {
        this.name = name;
    }

    public abstract handleRequest(request : MyRequest) : void;

    public setNext(successor : Handler) : void {
        this.successor = successor;
    }
}

class ConcreteHandler1 extends Handler {
    constructor(name : string) {
        super(name);
    }

    public handleRequest (request : MyRequest) : void {
        // \u9996\u5148\u5224\u65AD\u5F53\u524D\u7EA7\u522B\u662F\u5426\u80FD\u591F\u5904\u7406\uFF0C\u4E0D\u80FD\u591F\u5904\u7406\u5219\u4EA4\u7ED9\u4E0B\u4E00\u4E2A\u7EA7\u522B\u5904\u7406
if (request.level &lt;= 1) {
            console.log(&#39;\u88AB\u4E00\u7EA7\u5904\u7406&#39;);
        }else {
            // \u4EA4\u7ED9\u4E0B\u4E00\u7EA7\u5904\u7406
            this.successor &amp;&amp; this.successor.handleRequest(request);
        }
    }
}

class ConcreteHandler2 extends Handler {
    constructor(name : string) {
        super(name);
    }

    public handleRequest (request : MyRequest) : void {
        // \u9996\u5148\u5224\u65AD\u5F53\u524D\u7EA7\u522B\u662F\u5426\u80FD\u591F\u5904\u7406\uFF0C\u4E0D\u80FD\u591F\u5904\u7406\u5219\u4EA4\u7ED9\u4E0B\u4E00\u4E2A\u7EA7\u522B\u5904\u7406
if (request.level &gt; 1 &amp;&amp; request.level &lt;= 2) {
            console.log(&#39;\u88AB\u4E8C\u7EA7\u5904\u7406&#39;);
        }else {
            // \u4EA4\u7ED9\u4E0B\u4E00\u7EA7\u5904\u7406
            this.successor &amp;&amp; this.successor.handleRequest(request);
        }
    }
}

class ConcreteHandler3 extends Handler {
    constructor(name : string) {
        super(name);
    }

    public handleRequest (request : MyRequest) : void {
        // \u9996\u5148\u5224\u65AD\u5F53\u524D\u7EA7\u522B\u662F\u5426\u80FD\u591F\u5904\u7406\uFF0C\u4E0D\u80FD\u591F\u5904\u7406\u5219\u4EA4\u7ED9\u4E0B\u4E00\u4E2A\u7EA7\u522B\u5904\u7406
if (request.level &gt; 2) {
            console.log(&#39;\u88AB\u4E09\u7EA7\u5904\u7406&#39;);
        }else {
            // \u4EA4\u7ED9\u4E0B\u4E00\u7EA7\u5904\u7406
            this.successor &amp;&amp; this.successor.handleRequest(request);
        }
    }
}

class MyRequest {
    private _level : number;
    constructor(level : number) {
        this._level = level;
    }

    get level() : number {
        return this._level;
    }

    set level(value : number) {
        this._level = this.level;
    }
}

functionmain() {
    // \u521B\u5EFA\u4E00\u4E2A\u8BF7\u6C42
    const request : MyRequest = new MyRequest(5);

    // \u521B\u5EFA\u76F8\u5173\u5904\u7406\u4EBA
    const handler1 : Handler = new ConcreteHandler1(&#39;lili&#39;);
    const handler2 : Handler = new ConcreteHandler2(&#39;linlin&#39;);
    const handler3 : Handler = new ConcreteHandler3(&#39;shunshun&#39;);

    // \u8BBE\u7F6E\u4E0B\u7EA7\u522B\u5BA1\u6279\uFF0C\u6784\u6210\u73AF\u5F62\u7ED3\u6784
    handler1.setNext(handler2);
    handler2.setNext(handler3);
    handler3.setNext(handler1);

    handler1.handleRequest(request);
}

main();

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function _n(wn,fn){const e=a("ExternalLinkIcon");return r(),v("div",null,[t,u,m,n("p",null,[n("a",b,[o,s(e)])]),p,n("p",null,[n("a",h,[g,s(e)])]),x,_,w,n("p",null,[n("a",f,[A,s(e)])]),C,n("p",null,[n("a",y,[S,s(e)])]),q,n("p",null,[n("a",E,[j,s(e)])]),z,n("p",null,[n("a",k,[P,s(e)])]),B,n("p",null,[n("a",O,[D,s(e)])]),T,n("p",null,[n("a",Y,[I,s(e)])]),H,n("p",null,[n("a",U,[N,s(e)])]),F,n("p",null,[n("a",G,[M,s(e)])]),R,n("p",null,[n("a",V,[X,s(e)])]),Z,n("p",null,[n("a",J,[L,s(e)])]),Q,n("p",null,[n("a",K,[W,s(e)])]),$,n("p",null,[n("a",nn,[en,s(e)])]),sn,n("p",null,[n("a",ln,[dn,s(e)])]),rn,n("p",null,[n("a",vn,[an,s(e)])]),cn,n("p",null,[n("a",tn,[un,s(e)])]),mn,n("p",null,[n("a",bn,[on,s(e)])]),pn,n("p",null,[n("a",hn,[gn,s(e)])]),xn])}var yn=d(c,[["render",_n],["__file","01.23\u79CD\u8BBE\u8BA1\u6A21\u5F0F.html.vue"]]);export{yn as default};
